<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="/main.css" rel="stylesheet" />
  </head>

  <body class="grey-bg">
    <%- include('nav.ejs') %>
    <!-- <%= JSON.stringify(Í∏ÄÎ™©Î°ù) %> -->
    <div class="white-bg">
      <% for(let i=0; i < Í∏ÄÎ™©Î°ù.length ; i++) { %>
      <div class="list-box">
        <h4>
          <a href="detail/<%= Í∏ÄÎ™©Î°ù[i]._id %>"> <%= Í∏ÄÎ™©Î°ù[i].title %> </a>
          <a href="/edit/<%= Í∏ÄÎ™©Î°ù[i]._id %>">‚úèÔ∏è</a>
          <!-- ÏÇ≠Ï†úÎ≤ÑÌäºÏóê idÎùºÎäî Ïù¥Î¶ÑÏúºÎ°ú Í∏ÄÏùò _idÎ•º Ïà®Í≤®ÎÜìÏùÑ Ïàò ÏûàÎã§. -->
          <span class="delete" data-id="<%= Í∏ÄÎ™©Î°ù[i]._id %>">üóëÔ∏è</span>
        </h4>
        <p><%= Í∏ÄÎ™©Î°ù[i].content %></p>
      </div>
      <% } %>
    </div>
    <script>
      console.log("<%= Í∏ÄÎ™©Î°ù[0]._id %>");
      //Î∞©Î≤ï1
      // document
      //   .querySelectorAll(".delete")[0]
      //   .addEventListener("click", function () {
      //     fetch("/delete?docid=<%= Í∏ÄÎ™©Î°ù[0]._id %>", { method: "DELETE" });
      //   });

      //Î∞©Î≤ï2(Ï¢Ä Îçî Ï†ïÌôïÌïú Î∞©Î≤ï)
      document
        .querySelectorAll(".delete")[0]
        .addEventListener("click", function (e) {
          fetch("/delete?docid=" + e.target.dataset.id, {
            method: "DELETE",
          });
        });
    </script>
  </body>
</html>
